<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NZ Visa Pathway Quiz</title>

<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:#111}
  .wrap{max-width:860px;margin:0 auto;padding:18px}
  .top{display:flex;justify-content:space-between;gap:12px;align-items:flex-start;margin-bottom:12px}
  .title{font-weight:900;font-size:18px}
  .sub{color:#666;font-size:12.5px;margin-top:6px;line-height:1.3}
  .pill{border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;color:#666;font-size:12px;white-space:nowrap}
  .card{border:1px solid #e5e7eb;background:#f7f8fb;border-radius:14px;padding:16px}
  #q{font-size:17px;font-weight:800;line-height:1.3;margin:0 0 12px 0}
  #btns{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px}
  button{padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;background:#fff;cursor:pointer;font-weight:800;min-width:120px}
  .yes{border-color:#111;background:#111;color:#fff}
  .row{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
  #meta{color:#666;font-size:12.5px}
  #trail{margin-top:10px;display:flex;gap:6px;flex-wrap:wrap}
  .tag{border:1px solid #e5e7eb;background:#fff;border-radius:999px;padding:4px 8px;color:#666;font-size:12px}
  #out{margin-top:12px}
  ul{margin:10px 0 0 18px;padding:0}
  li{margin:6px 0;line-height:1.35}
  a{color:#2563eb;text-decoration:none}
  a:hover{text-decoration:underline}
  .foot{margin-top:10px;color:#777;font-size:11.5px;line-height:1.35}
</style>

<div class="wrap">
  <div class="top">
    <div>
      <div class="title">NZ Investment & Business Pathway Quiz</div>
      <div class="sub">Interactive decision tree based on your provided logic. Informational only.</div>
    </div>
    <div class="pill" id="step">Step 1</div>
  </div>

  <div class="card">
    <div id="q"></div>
    <div id="btns"></div>

    <div class="row">
      <div id="meta"></div>
      <div>
        <button id="back">Back</button>
        <button id="restart">Restart</button>
      </div>
    </div>

    <div id="trail"></div>
    <div id="out"></div>
  </div>

  <div class="foot">
    Sources: Immigration New Zealand (Active Investor Plus) and general INZ visa information.
  </div>
</div>

<script>
  const N = {
    START:{t:"Q1: Are you seeking NZ residence via investment or business?",y:"QHealth",n:"OUT"},
    QHealth:{t:"QHealth: Are you in good health?",y:"QPolice",n:"OUT"},
    QPolice:{t:"QPolice: Are you in good character and can you fill out a police certificate?",y:"Q55",n:"OUT"},
    Q55:{t:"Q55: Are you 55 or younger at time of application?",y:"Q500k",n:"Q10M"},
    Q500k:{t:"Q500k: Can you show you have at least NZD $500,000 to support yourself (and your family if you are including them) while running and growing your business?",y:"QBusinessExperience",n:"OUT"},
    QBusinessExperience:{t:"QBusinessExperience: Can you show that you meet business experience requirements?",y:"QEnglish",n:"OUT"},
    QEnglish:{t:"QEnglish: Can you show you can speak and understand English?",y:"Q2M",n:"OUT"},
    Q2M:{t:"Q2M: Do you have NZD $2m+ to invest?",y:"END_BI2M",n:"Q1M"},
    Q1M:{t:"Q1M: Do you have NZD $1m+ to invest?",y:"END_BI1M",n:"END_OTHER"},
    Q10M:{t:"Q10M: Do you have NZD $10m+ to invest?",y:"END_AIP10M",n:"Q5M"},
    Q5M:{t:"Q5M: Do you have NZD $5m+ to invest?",y:"END_AIP5M",n:"END_OTHER"},

    OUT:{r:1,title:"OUT: Not eligible via this decision tree",
      bul:["Based on your answers, this decision tree does not identify a match.","You may still have other options depending on your circumstances."],
      link:"https://www.immigration.govt.nz/"},

    END_OTHER:{r:1,title:"Other Options",
      bul:["There are other options to immigrate, which can be found here:"],
      link:"https://www.immigration.govt.nz/"},

    END_BI2M:{r:1,title:"Business Investor (NZD $2m)",
      bul:["Age ≤55","$2m investment","Established business, 5 employees","English, health, character","Day to day operations (active involvement)","Greater than 50% of time in NZ","Cost $12,380","Resident visa after 12 months FAST TRACK (36 months total)"]},

    END_BI1M:{r:1,title:"Business Investor (NZD $1m)",
      bul:["Age ≤55","$1m investment","Established business, 5 employees","English, health, character","Day to day operations (active involvement)","Greater than 50% of time in NZ","Cost $12,380","Resident visa after 36 months"]},

    END_AIP10M:{r:1,title:"Active Investor Plus (Balanced Category)",
      bul:["See official requirements here:"],
      link:"https://www.immigration.govt.nz/visas/active-investor-plus-visa/"},

    END_AIP5M:{r:1,title:"Active Investor Plus (Growth Category)",
      bul:["See official requirements here:"],
      link:"https://www.immigration.govt.nz/visas/active-investor-plus-visa/"}
  };

  let cur="START", H=[], A=[];
  const q=document.getElementById("q"), btns=document.getElementById("btns"),
        meta=document.getElementById("meta"), out=document.getElementById("out"),
        trail=document.getElementById("trail"), step=document.getElementById("step"),
        back=document.getElementById("back"), restart=document.getElementById("restart");

  const esc=s=>String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
  function render(){
    const n=N[cur]; out.innerHTML=""; trail.innerHTML="";
    step.textContent = n && n.r ? "Result" : ("Step "+Math.max(1,A.length+1));
    back.disabled = H.length===0;

    A.slice(-6).forEach(x=>{
      const d=document.createElement("div"); d.className="tag"; d.textContent=x.k+": "+x.a; trail.appendChild(d);
    });

    if(!n){ q.textContent="Missing node: "+cur; btns.innerHTML=""; meta.textContent=""; return; }

    if(!n.r){
      q.textContent=n.t; meta.textContent="Choose YES or NO to continue.";
      btns.innerHTML="";
      const y=document.createElement("button"); y.className="yes"; y.textContent="YES"; y.onclick=()=>go("YES");
      const no=document.createElement("button"); no.textContent="NO"; no.onclick=()=>go("NO");
      btns.appendChild(y); btns.appendChild(no);
      return;
    }

    q.innerHTML="<div style='font-size:17px;font-weight:900'>"+esc(n.title)+"</div>";
    meta.textContent="You reached an end point.";
    let html="<ul>"+(n.bul||[]).map(b=>"<li>"+esc(b)+"</li>").join("")+"</ul>";
    if(n.link){ html+="<div style='margin-top:10px;font-size:12px;color:#666'>Link: <a target=_blank rel=noopener href='"+n.link+"'>"+n.link+"</a></div>"; }
    out.innerHTML=html;
    btns.innerHTML="";
  }
  function go(ans){
    const n=N[cur]; if(!n||n.r) return;
    H.push(cur); A.push({k:cur,a:ans});
    cur = ans==="YES" ? n.y : n.n;
    render();
  }
  back.onclick=()=>{ if(!H.length) return; cur=H.pop(); A.pop(); render(); };
  restart.onclick=()=>{ cur="START"; H=[]; A=[]; render(); };
  render();
</script>
</html>
